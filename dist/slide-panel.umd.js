(function(c,h){typeof exports=="object"&&typeof module!="undefined"?h(exports):typeof define=="function"&&define.amd?define(["exports"],h):(c=typeof globalThis!="undefined"?globalThis:c||self,h(c.SlidePanel={}))})(this,function(c){"use strict";var h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"slide-deck-panel",class:e.classes,style:e.styles},[e._t("default")],2)},M=[],te="";function v(e,t,r,n,i,a,u,f){var s=typeof e=="function"?e.options:e;t&&(s.render=t,s.staticRenderFns=r,s._compiled=!0),n&&(s.functional=!0),a&&(s._scopeId="data-v-"+a);var l;if(u?(l=function(o){o=o||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!o&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(o=__VUE_SSR_CONTEXT__),i&&i.call(this,o),o&&o._registeredComponents&&o._registeredComponents.add(u)},s._ssrRegister=l):i&&(l=f?function(){i.call(this,(s.functional?this.parent:this).$root.$options.shadowRoot)}:i),l)if(s.functional){s._injectStyles=l;var m=s.render;s.render=function(ee,E){return l.call(E),m(ee,E)}}else{var O=s.beforeCreate;s.beforeCreate=O?[].concat(O,l):[l]}return{exports:e,options:s}}function g(e,t="px"){return e!=null&&e!==!1&&isFinite(e)?`${e}${t}`:e}const P={props:{align:{type:String,default:"right",validator:e=>["left","right"].indexOf(e)>-1},minWidth:[Number,String],maxWidth:[Number,String],width:[Number,String],registry:{type:Object,default(){return{zIndex:0,panels:[]}}}},computed:{classes(){return{[`slide-${this.align}`]:!0}},styles(){return{width:this.width?g(this.width):null,minWidth:this.minWidth?g(this.minWidth):null,maxWidth:this.maxWidth?g(this.maxWidth):null,zIndex:this.registry.zIndex===0?-1:1,display:this.registry.zIndex===0?"none":void 0}}},created(){window.addEventListener("keyup",({code:e})=>{e==="Escape"&&this.registry.panels.length&&this.registry.panels[this.registry.panels.length-1].close()})}},_={};var C=v(P,h,M,!1,j,null,null,null);function j(e){for(let t in _)this[t]=_[t]}var b=function(){return C.exports}(),y={px:{px:1,cm:96/2.54,mm:96/25.4,in:96,pt:96/72,pc:16},cm:{px:2.54/96,cm:1,mm:.1,in:2.54,pt:2.54/72,pc:2.54/6},mm:{px:25.4/96,cm:10,mm:1,in:25.4,pt:25.4/72,pc:25.4/6},in:{px:1/96,cm:1/2.54,mm:1/25.4,in:1,pt:1/72,pc:1/6},pt:{px:.75,cm:72/2.54,mm:72/25.4,in:72,pt:1,pc:12},pc:{px:6/96,cm:6/2.54,mm:6/25.4,in:6,pt:6/72,pc:1},deg:{deg:1,grad:.9,rad:180/Math.PI,turn:360},grad:{deg:400/360,grad:1,rad:200/Math.PI,turn:400},rad:{deg:Math.PI/180,grad:Math.PI/200,rad:1,turn:Math.PI*2},turn:{deg:1/360,grad:1/400,rad:.5/Math.PI,turn:1},s:{s:1,ms:1/1e3},ms:{s:1e3,ms:1},Hz:{Hz:1,kHz:1e3},kHz:{Hz:1/1e3,kHz:1},dpi:{dpi:1,dpcm:1/2.54,dppx:1/96},dpcm:{dpi:2.54,dpcm:1,dppx:2.54/96},dppx:{dpi:96,dpcm:96/2.54,dppx:1}},I=function(e,t,r,n){if(!y.hasOwnProperty(r))throw new Error("Cannot convert to "+r);if(!y[r].hasOwnProperty(t))throw new Error("Cannot convert from "+t+" to "+r);var i=y[r][t]*e;return n!==!1?(n=Math.pow(10,parseInt(n)||5),Math.round(i*n)/n):i},T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"slide-panel",class:e.classes,style:e.styles,on:{mouseenter:function(n){return n.target!==n.currentTarget?null:e.onMouseenter.apply(null,arguments)},mouseleave:function(n){return n.target!==n.currentTarget?null:e.onMouseleave.apply(null,arguments)},keydown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:e.onEsc.apply(null,arguments)}}},[r("transition",{attrs:{name:"slide"},on:{"before-enter":e.onBeforeEnter,enter:e.onEnter,"after-enter":e.onAfterEnter,"before-leave":e.onBeforeLeave,leave:e.onLeave,"after-leave":e.onAfterLeave}},[e.isShowing?r("div",{ref:"content",staticClass:"slide-panel-content",on:{click:e.onClick}},[r("div",{ref:"inner",staticClass:"slide-panel-content-inner"},[e._t("default")],2),r("div",[r("a",{ref:"close",staticClass:"slide-panel-close",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.close.apply(null,arguments)}}},[r("span",[e._v("\xD7")])])])]):e._e()])],1)},A=[],re="";function z(e,...t){return e.reduce((r,n)=>r.then(()=>n(...t)),Promise.resolve())}const k={props:{align:{type:String,default(){return this.$parent.align},validator:e=>["left","right"].indexOf(e)>-1},registry:{type:Object,default(){return this.$parent.registry}},show:Boolean},data(){return{isDisplaying:!1,isHover:!1,isShowing:!1,isTopSlide:!1,zIndex:-1}},computed:{classes(){return{show:this.isShowing,"slide-top":!!this.isTopSlide}},duration(){return getComputedStyle(this.$refs.content).transitionDuration.split(",").map(e=>{const[t,r,n]=e.trim().match(/^([\d.]+)(\w+)$/);return I(parseFloat(r),n,"ms")}).sort((e,t)=>e-t).shift()},styles(){const e=this.$parent.align==="left"?1:-1;return{zIndex:this.isDisplaying?this.zIndex:-1,display:this.isDisplaying?"flex":"none",transform:this.isShowing&&`translateX(calc((${e} * ${this.registry.panels.length-1-this.registry.panels.indexOf(this)} * 3.5rem) - (${e*-1} * ${this.isHover&&!this.isTopSlide?"3.5rem":"0rem"})))`}}},watch:{["registry.panels"](e){const t=this.registry.panels.indexOf(this);this.isTopSlide=t>-1&&t+1===this.registry.panels.length},isShowing(e){const t=this.registry.panels.indexOf(this);e?(this.isDisplaying=!0,this.zIndex=++this.registry.zIndex,this.registry.panels.push(this)):this.registry.panels.splice(t,1)},isDisplaying(e){e?this.$emit("open",this):this.registry.panels.length||(this.registry.zIndex=0)},show(e){e?this.open():this.close()}},mounted(){this.show&&setTimeout(()=>this.open(),1)},methods:{close(e){const t=new Event("close",{cancelable:!0});return new Promise(r=>{setTimeout(()=>{this.$emit("close",t,r),t.defaultPrevented||r(!0)})}).then(r=>(typeof e=="function"&&(r=e(r)),console.log("then"),this.isShowing=r===!1)),this},divide(e,t){const r=e.toString().match(/^(\d+)(.+)$/);return r[0]?`${parseInt(r[1])/t}${r[2]}`:e},open(){return this.isShowing=!0,this},toggle(){return this.isShowing?this.close():this.open(),this},onBeforeEnter(){this.$emit("before-enter",this)},onEnter(){this.$emit("enter",this)},onAfterEnter(){this.$emit("after-enter",this)},onBeforeLeave(){this.$emit("before-leave",this)},onLeave(){this.$emit("leave",this)},onAfterLeave(){this.isDisplaying=this.isShowing,this.$emit("after-leave",this)},onClick(e){if(this.$refs.close){const t=this.registry.panels.indexOf(this),r=this.registry.panels.slice(t+1),n=r.reverse().map((i,a)=>()=>new Promise(u=>{i.close(f=>(f!==!1&&setTimeout(()=>{u(f)},this.duration/(r.length-a)),f))}));z(n)}},onClickClose(){this.close()},onMouseenter(e){this.isTopSlide||this.registry.panels.slice(0,this.registry.panels.indexOf(this)+1).forEach(t=>{t.isHover=!0})},onMouseleave(e){this.registry.panels.slice(0,this.registry.panels.indexOf(this)+1).forEach(t=>{t.isHover=!1})}}},$={};var D=v(k,T,A,!1,W,null,null,null);function W(e){for(let t in $)this[t]=$[t]}var S=function(){return D.exports}(),H=function(t){return R(t)&&!N(t)};function R(e){return!!e&&typeof e=="object"}function N(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||B(e)}var L=typeof Symbol=="function"&&Symbol.for,F=L?Symbol.for("react.element"):60103;function B(e){return e.$$typeof===F}function X(e){return Array.isArray(e)?[]:{}}function p(e,t){return t.clone!==!1&&t.isMergeableObject(e)?d(X(e),e,t):e}function K(e,t,r){return e.concat(t).map(function(n){return p(n,r)})}function U(e,t){if(!t.customMerge)return d;var r=t.customMerge(e);return typeof r=="function"?r:d}function Y(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}function w(e){return Object.keys(e).concat(Y(e))}function x(e,t){try{return t in e}catch{return!1}}function q(e,t){return x(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function G(e,t,r){var n={};return r.isMergeableObject(e)&&w(e).forEach(function(i){n[i]=p(e[i],r)}),w(t).forEach(function(i){q(e,i)||(x(e,i)&&r.isMergeableObject(t[i])?n[i]=U(i,r)(e[i],t[i],r):n[i]=p(t[i],r))}),n}function d(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||K,r.isMergeableObject=r.isMergeableObject||H,r.cloneUnlessOtherwiseSpecified=p;var n=Array.isArray(t),i=Array.isArray(e),a=n===i;return a?n?r.arrayMerge(e,t,r):G(e,t,r):p(t,r)}d.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return d(n,i,r)},{})};var J=d,Q=J;class V{constructor(t){this.$vue=t}register(t,r={}){const n=this.$vue.extend({functional:!0,render:a=>a(b,Object.assign({ref:"deck"},r))}),i=new n({el:document.body.appendChild(document.createElement("div"))});this[t]=(a,u={})=>new Promise(f=>{const s=this.$vue.extend({beforeDestroy(){this.$root.$el.parentNode.removeChild(this.$root.$el)},render(l){const m=Q({ref:"panel",props:{show:!0,align:i.$refs.deck.align},on:{["after-leave"]:()=>{this.$nextTick(()=>this.$destroy())}}},u);return m.props.registry=i.$refs.deck.registry,l(S,m,[()=>a.apply(this.$refs.panel,[l,this.$refs.panel])])}});new s({el:i.$el.appendChild(document.createElement("div"))})}).finally(()=>{})}}var Z=e=>{e.prototype.$slidePanel=new V(e),e.prototype.$slidePanel.register("right",{props:{align:"right"}}),e.prototype.$slidePanel.register("left",{props:{align:"left"}})};c.SlideDeck=b,c.SlidePanel=S,c.SlidePanelPlugin=Z,Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
