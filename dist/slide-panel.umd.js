(function(c,f){typeof exports=="object"&&typeof module!="undefined"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(c=typeof globalThis!="undefined"?globalThis:c||self,f(c.SlidePanel={}))})(this,function(c){"use strict";var f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"slide-deck-panel-wrapper",style:{display:e.display?void 0:"none"}},[e.backdrop?r("div",{staticClass:"slide-deck-panel-backdrop",on:{click:e.onClickBackdrop}}):e._e(),r("div",{ref:"panel",staticClass:"slide-deck-panel",class:e.classes,style:e.styles},[e._t("default")],2)])},P=[],te="";function v(e,t,r,n,s,a,p,d){var i=typeof e=="function"?e.options:e;t&&(i.render=t,i.staticRenderFns=r,i._compiled=!0),n&&(i.functional=!0),a&&(i._scopeId="data-v-"+a);var l;if(p?(l=function(o){o=o||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!o&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(o=__VUE_SSR_CONTEXT__),s&&s.call(this,o),o&&o._registeredComponents&&o._registeredComponents.add(p)},i._ssrRegister=l):s&&(l=d?function(){s.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(i.functional){i._injectStyles=l;var g=i.render;i.render=function(ee,M){return l.call(M),g(ee,M)}}else{var O=i.beforeCreate;i.beforeCreate=O?[].concat(O,l):[l]}return{exports:e,options:i}}function C(e,...t){return e.reduce((r,n)=>r.then(()=>n(...t)),Promise.resolve())}const E={props:{align:{type:String,default:"right",validator:e=>["left","right"].indexOf(e)>-1},backdrop:Boolean,registry:{type:Object,default(){const e=this;return{zIndex:0,panels:[],get slideDeck(){return e},get topSlide(){return this.panels.find(t=>t.isTopSlide)}}}}},data:()=>({display:!1,isBackdropShowing:!1}),computed:{classes(){return{[`slide-${this.align}`]:!0,"has-slide-top":this.registry.panels.reduce((e,t)=>e||t.isTopSlide,!1)}},lastSlide(){return this.registry.panels[this.registry.panels.length-1]},styles(){return{display:this.display?void 0:"none",zIndex:this.registry.zIndex===0?-1:1}}},watch:{["registry.zIndex"](e){this.display=e>0}},mounted(){window.addEventListener("keyup",({code:e})=>{e==="Escape"&&this.registry.panels.length&&this.registry.panels[this.registry.panels.length-1].close()})},methods:{x(){return this.$el.getBoundingClientRect().x},y(){return this.$el.getBoundingClientRect().y},onClickBackdrop(){const e=[...this.registry.panels].reverse().map((t,r)=>()=>new Promise(n=>{t.close(s=>(s!==!1&&setTimeout(()=>{n(s)},Math.max(100,t.duration/(this.registry.panels.length-r))),s))}));C(e)}}},_={};var T=v(E,f,P,!1,j,null,null,null);function j(e){for(let t in _)this[t]=_[t]}var $=function(){return T.exports}(),m={px:{px:1,cm:96/2.54,mm:96/25.4,in:96,pt:96/72,pc:16},cm:{px:2.54/96,cm:1,mm:.1,in:2.54,pt:2.54/72,pc:2.54/6},mm:{px:25.4/96,cm:10,mm:1,in:25.4,pt:25.4/72,pc:25.4/6},in:{px:1/96,cm:1/2.54,mm:1/25.4,in:1,pt:1/72,pc:1/6},pt:{px:.75,cm:72/2.54,mm:72/25.4,in:72,pt:1,pc:12},pc:{px:6/96,cm:6/2.54,mm:6/25.4,in:6,pt:6/72,pc:1},deg:{deg:1,grad:.9,rad:180/Math.PI,turn:360},grad:{deg:400/360,grad:1,rad:200/Math.PI,turn:400},rad:{deg:Math.PI/180,grad:Math.PI/200,rad:1,turn:Math.PI*2},turn:{deg:1/360,grad:1/400,rad:.5/Math.PI,turn:1},s:{s:1,ms:1/1e3},ms:{s:1e3,ms:1},Hz:{Hz:1,kHz:1e3},kHz:{Hz:1/1e3,kHz:1},dpi:{dpi:1,dpcm:1/2.54,dppx:1/96},dpcm:{dpi:2.54,dpcm:1,dppx:2.54/96},dppx:{dpi:96,dpcm:96/2.54,dppx:1}},I=function(e,t,r,n){if(!m.hasOwnProperty(r))throw new Error("Cannot convert to "+r);if(!m[r].hasOwnProperty(t))throw new Error("Cannot convert from "+t+" to "+r);var s=m[r][t]*e;return n!==!1?(n=Math.pow(10,parseInt(n)||5),Math.round(s*n)/n):s},k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"slide-panel",class:e.classes,style:e.styles,on:{mouseenter:function(n){return n.target!==n.currentTarget?null:e.onMouseenter.apply(null,arguments)},mouseleave:function(n){return n.target!==n.currentTarget?null:e.onMouseleave.apply(null,arguments)}}},[r("transition",{attrs:{name:"slide"},on:{"before-enter":e.onBeforeEnter,enter:e.onEnter,"after-enter":e.onAfterEnter,"before-leave":e.onBeforeLeave,leave:e.onLeave,"after-leave":e.onAfterLeave}},[e.isShowing?r("div",{ref:"content",staticClass:"slide-panel-content",on:{click:e.onClick}},[r("div",{ref:"inner",staticClass:"slide-panel-content-inner"},[e._t("default")],2),r("div",[r("a",{ref:"close",staticClass:"slide-panel-close",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),e.close.apply(null,arguments)}}},[r("span",[e._v("\xD7")])])])]):e._e()])],1)},A=[],re="";function z(e,...t){return e.reduce((r,n)=>r.then(()=>n(...t)),Promise.resolve())}const D={props:{align:{type:String,default(){return this.$parent.align},validator:e=>["left","right"].indexOf(e)>-1},registry:{type:Object,default(){return this.$parent.registry}},show:Boolean,width:{type:String,default:"33%"}},data(){return{isDisplaying:!1,isHover:!1,isShowing:!1,isTopSlide:!1,translateX:0,zIndex:-1}},computed:{classes(){return{show:this.isShowing,"slide-top":!!this.isTopSlide}},duration(){return getComputedStyle(this.$refs.content).transitionDuration.split(",").map(e=>{const[t,r,n]=e.trim().match(/^([\d.]+)(\w+)$/);return I(parseFloat(r),n,"ms")}).sort((e,t)=>e-t).shift()},styles(){const e=this.$parent.align==="left"?1:-1,t=this.registry.panels.length-1-this.registry.panels.indexOf(this);return{zIndex:this.isDisplaying?this.zIndex:-1,display:this.isDisplaying?"flex":"none",transform:this.isShowing&&`translateX(calc((${e} * ${t} * 3.5rem) - (${e*-1} * ${this.isHover&&!this.isTopSlide?"3.5rem":"0rem"})))`}}},watch:{["registry.panels"](e){const t=this.registry.panels.indexOf(this);this.isTopSlide=t>-1&&t+1===this.registry.panels.length},isShowing(e){const t=this.registry.panels.indexOf(this);e?(this.isDisplaying=!0,this.zIndex=++this.registry.zIndex,this.registry.panels.push(this)):this.registry.panels.splice(t,1)},isDisplaying(e){e?this.$emit("open",this):this.registry.panels.length||(this.registry.zIndex=0)},show(e){e?this.open():this.close()}},mounted(){this.show&&setTimeout(()=>this.open(),1)},methods:{close(e){const t=new Event("close",{cancelable:!0});return new Promise(r=>{setTimeout(()=>{this.$emit("close",t,r),t.defaultPrevented||r(!0)})}).then(r=>(typeof e=="function"&&(r=e(r)),this.isShowing=r===!1)),this},divide(e,t){const r=e.toString().match(/^(\d+)(.+)$/);return r[0]?`${parseInt(r[1])/t}${r[2]}`:e},open(){return this.isShowing=!0,this},toggle(){return this.isShowing?this.close():this.open(),this},translatePosition(){},x(){return this.$el&&this.$el.getBoundingClientRect().x},y(){return this.$el&&this.$el.getBoundingClientRect().y},onBeforeEnter(){this.$emit("before-enter",this)},onEnter(){this.$emit("enter",this)},onAfterEnter(){this.$emit("after-enter",this)},onBeforeLeave(){this.$emit("before-leave",this)},onLeave(){this.$emit("leave",this)},onAfterLeave(){this.isDisplaying=this.isShowing,this.$emit("after-leave",this)},onClick(e){if(this.$refs.close){const t=this.registry.panels.indexOf(this),r=this.registry.panels.slice(t+1),n=r.reverse().map((s,a)=>()=>new Promise(p=>{s.close(d=>(d!==!1&&setTimeout(()=>{p(d)},Math.max(100,this.duration/(r.length-a))),d))}));z(n)}},onClickClose(){this.close()},onMouseenter(e){this.isTopSlide||this.registry.panels.slice(0,this.registry.panels.indexOf(this)+1).forEach(t=>{t.isHover=!0})},onMouseleave(e){this.registry.panels.slice(0,this.registry.panels.indexOf(this)+1).forEach(t=>{t.isHover=!1})}}},b={};var R=v(D,k,A,!1,B,null,null,null);function B(e){for(let t in b)this[t]=b[t]}var S=function(){return R.exports}(),H=function(t){return L(t)&&!F(t)};function L(e){return!!e&&typeof e=="object"}function F(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||X(e)}var N=typeof Symbol=="function"&&Symbol.for,W=N?Symbol.for("react.element"):60103;function X(e){return e.$$typeof===W}function K(e){return Array.isArray(e)?[]:{}}function h(e,t){return t.clone!==!1&&t.isMergeableObject(e)?u(K(e),e,t):e}function U(e,t,r){return e.concat(t).map(function(n){return h(n,r)})}function Y(e,t){if(!t.customMerge)return u;var r=t.customMerge(e);return typeof r=="function"?r:u}function q(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}function w(e){return Object.keys(e).concat(q(e))}function x(e,t){try{return t in e}catch{return!1}}function G(e,t){return x(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function J(e,t,r){var n={};return r.isMergeableObject(e)&&w(e).forEach(function(s){n[s]=h(e[s],r)}),w(t).forEach(function(s){G(e,s)||(x(e,s)&&r.isMergeableObject(t[s])?n[s]=Y(s,r)(e[s],t[s],r):n[s]=h(t[s],r))}),n}function u(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||U,r.isMergeableObject=r.isMergeableObject||H,r.cloneUnlessOtherwiseSpecified=h;var n=Array.isArray(t),s=Array.isArray(e),a=n===s;return a?n?r.arrayMerge(e,t,r):J(e,t,r):h(t,r)}u.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,s){return u(n,s,r)},{})};var Q=u,y=Q;class Z{constructor(t){this.$vue=t}register(t,r={}){const n=this.$vue.extend({functional:!0,render:a=>a($,Object.assign({ref:"deck"},r))}),s=new n({el:document.body.appendChild(document.createElement("div"))});this[t]=(a,p={})=>new Promise(d=>{const i=this.$vue.extend({beforeDestroy(){this.$root.$el.parentNode.removeChild(this.$root.$el),d()},render(l){const g=y({ref:"panel",props:{show:!0,align:s.$refs.deck.align},on:{["after-leave"]:()=>{this.$nextTick(()=>this.$destroy())}}},p);return g.props.registry=s.$refs.deck.registry,l(S,g,[()=>a.apply(this.$refs.panel,[l,this.$refs.panel])])}});new i({el:s.$refs.deck.$refs.panel.appendChild(document.createElement("div"))})}).finally(()=>{})}}var V=(e,t={})=>{e.prototype.$store=t.store,e.prototype.$slidePanel=new Z(e),e.prototype.$slidePanel.register("right",y({props:{align:"right"}},t.right||{})),e.prototype.$slidePanel.register("left",y({props:{align:"left"}},t.left||{}))};c.SlideDeck=$,c.SlidePanel=S,c.SlidePanelPlugin=V,Object.defineProperties(c,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
